(this["webpackJsonpwjw-potato"]=this["webpackJsonpwjw-potato"]||[]).push([[0],{172:function(e,t,n){e.exports=n(322)},181:function(e,t,n){},201:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){},267:function(e,t,n){},268:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){},284:function(e,t,n){},285:function(e,t,n){},304:function(e,t,n){},305:function(e,t,n){},308:function(e,t,n){},315:function(e,t,n){},316:function(e,t,n){},321:function(e,t,n){},322:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(4),s=n.n(r),i=n(15),c=n(71),u=n(40),l=Object(c.b)({todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TODO":return[].concat(Object(u.a)(e),[t.payload]);case"INIT_TODOS":return Object(u.a)(t.payload);case"UPDATE_TODOS":return e.map((function(e){return e.id===t.payload.id?t.payload:e}));case"EDIT_TODOS":return e.map((function(e){return e.id===t.payload?Object.assign({},e,{editing:!0}):Object.assign({},e,{editing:!1})}));default:return e}},tomatoes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TOMATO":return[].concat(Object(u.a)(e),[t.payload]);case"UPDATE_TOMATO":return e.map((function(e){return e.id===t.payload.id?t.payload:e}));case"INIT_TOMATOES":return Object(u.a)(t.payload);default:return e}}}),d=Object(c.c)(l),m=(n(181),n(5)),p=n(6),h=n(8),f=n(7),y=n(56),v=(n(57),n(19)),b=(n(84),n(36)),E=n(10),T=n.n(E),O=n(17),g=n(330),j=n(331),k=n(149),w=n.n(k),D=n(27),C=Object(D.a)(),N=w.a.create({baseURL:"https://gp-server.hunger-valley.com/",headers:{"t-app-id":"sv2eTjKsNCV5BkjXfBRuMHgo","t-app-secret":"CtvAYi3xZp9G12Ld2yMzQL8T"}});N.interceptors.request.use((function(e){var t=localStorage.getItem("x-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return console.error(e),Promise.reject(e)})),N.interceptors.response.use((function(e){var t=e.headers["x-token"];return t&&localStorage.setItem("x-token",t),e}),(function(e){return 401===e.response.status&&C.push("/login"),Promise.reject(e)}));var x,M=N,S=n(70),P=(n(201),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).onChangeAccount=function(e){a.setState({account:e.target.value})},a.onChangePassword=function(e){a.setState({password:e.target.value})},a.submit=Object(O.a)(T.a.mark((function e(){var t,n,o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.account,o=t.password,e.prev=1,e.next=4,M.post("sign_in/user",{account:n,password:o});case 4:a.props.history.push("/"),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),a.state={account:"",password:""},a}return Object(p.a)(n,[{key:"render",value:function(){var e=this.state,t=e.account,n=e.password;return a.createElement("div",{className:"Login",id:"Login"},a.createElement("h1",null,"W-\u756a\u8304\u95f9\u949f\u767b\u5f55"),a.createElement(b.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",value:t,onChange:this.onChangeAccount,prefix:a.createElement(g.a,{className:"site-form-item-icon"})}),a.createElement(b.a.Password,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",value:n,onChange:this.onChangePassword,prefix:a.createElement(j.a,{className:"site-form-item-icon"})}),a.createElement(v.a,{onClick:this.submit,className:"loginButton",type:"primary"},"\u767b\u5f55"),a.createElement("p",null,"\u5982\u679c\u4f60\u6ca1\u6709\u8d26\u53f7\uff0c\u8bf7",a.createElement(S.a,{to:"/signup"},"\u6ce8\u518c")))}}]),n}(a.Component)),_=Object(y.f)(P),A=n(16),H=(n(257),n(170)),F=(n(323),n(121)),I=n(336),W=n(337),U=n(338),B=function(e){return{type:"UPDATE_TODOS",payload:e}},L=function(e){return{type:"UPDATE_TOMATO",payload:e}},J=n(332),K=n(333),Y=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).onChange=function(e){a.setState({description:e.target.value})},a.onKeyUp=function(e){13===e.keyCode&&""!==a.state.description&&a.postTodo()},a.postTodo=Object(O.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.post("todos",{description:a.state.description});case 3:t=e.sent,a.props.addTodo(t.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:a.setState({description:""});case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),a.state={description:""},a}return Object(p.a)(n,[{key:"render",value:function(){var e=this.state.description,t=e?a.createElement(J.a,{onClick:this.postTodo}):a.createElement("span",null);return a.createElement("div",{className:"TodoInput",id:"TodoInput"},a.createElement(b.a,{placeholder:"\u6dfb\u52a0\u65b0\u4efb\u52a1",prefix:a.createElement(K.a,null),suffix:t,value:e,onChange:this.onChange,onKeyUp:this.onKeyUp}))}}]),n}(a.Component),z={addTodo:function(e){return{type:"ADD_TODO",payload:e}}},R=Object(i.b)((function(e,t){return Object(A.a)({},t)}),z)(Y),q=(n(261),n(171)),G=n(334),Q=n(1),V=n.n(Q),X=(n(263),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).updateTodo=function(){var e=Object(O.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.completed&&(t.completed_at=new Date),e.prev=1,e.next=4,M.put("todos/".concat(a.props.id),t);case 4:n=e.sent,a.props.updateTodo(n.data.resource),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),a.editTodo=function(){a.props.editTodo(a.props.id)},a.onkeyUp=function(e){13===e.keyCode&&""!==a.state.itemText&&a.updateTodo({description:a.state.itemText})},a.onClick=function(){""!==a.state.itemText&&a.updateTodo({description:a.state.itemText})},a.state={itemText:a.props.description},a}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=a.createElement("div",{className:"editing"},a.createElement("input",{value:this.state.itemText,onChange:function(t){e.setState({itemText:t.target.value})},onKeyUp:this.onkeyUp}),a.createElement("div",{className:"iconWrapper"},a.createElement(J.a,{onClick:this.onClick}),a.createElement(G.a,{onClick:function(t){e.updateTodo({deleted:!0})}}))),n=a.createElement("span",{className:"text",onDoubleClick:this.editTodo},this.props.description),o=V()({todoItem:!0,editing:this.props.editing,completed:this.props.completed});return a.createElement("div",{className:o,id:"todoItem"},a.createElement(q.a,{checked:this.props.completed,onChange:function(t){return e.updateTodo({completed:t.target.checked})}}),this.props.editing?t:n)}}]),n}(a.Component)),Z={editTodo:function(e){return{type:"EDIT_TODOS",payload:e}},updateTodo:B},$=Object(i.b)((function(e,t){return Object(A.a)({},t)}),Z)(X),ee=(n(264),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(m.a)(this,n);for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).emptyTodoList=function(){if(0===e.unCompletedTodos.length)return a.createElement("div",{className:"empty"},a.createElement("span",null,"\u65e0\u8bb0\u5f55"))},e}return Object(p.a)(n,[{key:"render",value:function(){return a.createElement("div",{className:"Todos",id:"Todos"},a.createElement(R,null),a.createElement("div",{className:"todoLists"},this.unCompletedTodos.map((function(e){return a.createElement($,Object.assign({key:e.id},e))})),this.emptyTodoList()))}},{key:"unDeletedTodos",get:function(){return this.props.todos.filter((function(e){return!e.deleted}))}},{key:"unCompletedTodos",get:function(){return this.unDeletedTodos.filter((function(e){return!e.completed}))}},{key:"completedTodos",get:function(){return this.unDeletedTodos.filter((function(e){return e.completed}))}}]),n}(a.Component)),te=Object(i.b)((function(e,t){return Object(A.a)({todos:e.todos},t)}))(ee),ne=(n(265),n(169)),ae=n(335),oe=(n(267),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).state={countDown:a.props.timer},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;x=setInterval((function(){var t=e.state.countDown;e.setState({countDown:t-1e3}),document.title="".concat(e.countDown," - WJW Potato"),t<1e3&&(e.props.onFinish(),document.title="WJW \u756a\u8304\u571f\u8c46",clearInterval(x))}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(x),document.title="WJW \u756a\u8304\u571f\u8c46"}},{key:"render",value:function(){var e=1-this.state.countDown/this.props.duration;return a.createElement("div",{className:"CountDown",id:"CountDown"},a.createElement("span",{className:"restTime"},this.countDown),a.createElement("div",{className:"progress",style:{width:"".concat(100*e,"%")}}))}},{key:"countDown",get:function(){var e=this.state.countDown,t=Math.floor(e/1e3/60),n=Math.floor(e/1e3%60);return"".concat(t<10?"0".concat(t):t,":").concat(n<10?"0".concat(n):n)}}]),n}(a.Component)),re=(n(268),ne.a.confirm),se=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).onKeyUp=function(e){13===e.keyCode&&""!==a.state.discription&&(a.updateTomato({description:a.state.discription,ended_at:new Date}),a.setState({discription:""}))},a.onFinish=function(){a.forceUpdate(),document.title="WJW \u756a\u8304\u571f\u8c46"},a.abortTomato=function(){a.updateTomato({aborted:!0})},a.updateTomato=function(){var e=Object(O.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.put("tomatoes/".concat(a.props.unfinishedTomato.id),t);case 3:n=e.sent,a.props.updateTomato(n.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),a.showConfirm=function(){re({title:"\u60a8\u76ee\u524d\u6b63\u5728\u4e00\u4e2a\u756a\u8304\u5de5\u4f5c\u65f6\u95f4\u4e2d\uff0c\u8981\u653e\u5f03\u8fd9\u4e2a\u756a\u8304\u5417\uff1f",onOk:function(){a.abortTomato()},onCancel:function(){console.log("\u53d6\u6d88")},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"})},a.state={discription:""},a}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=a.createElement("div",null);if(void 0===this.props.unfinishedTomato)t=a.createElement(v.a,{onClick:this.props.startTomato},"\u5f00\u59cb\u756a\u8304");else{var n=Date.parse(this.props.unfinishedTomato.started_at),o=this.props.unfinishedTomato.duration,r=(new Date).getTime();if(r-n>o)t=a.createElement("div",{className:"inputWrapper"},a.createElement(b.a,{placeholder:"\u521a\u521a\u5b8c\u6210\u4e86\u4ec0\u4e48\u4e8b\uff1f",value:this.state.discription,onChange:function(t){e.setState({discription:t.target.value})},onKeyUp:this.onKeyUp}),a.createElement(ae.a,{onClick:this.showConfirm,className:"abort"}));else if(r-n<o){var s=o-r+n;t=a.createElement("div",{className:"countDownWrapper"},a.createElement(oe,{timer:s,duration:o,onFinish:this.onFinish}),a.createElement(ae.a,{onClick:this.showConfirm,className:"abort"}))}}return a.createElement("div",{className:"TomatoAction",id:"TomatoAction"},t)}}]),n}(a.Component),ie=n(329),ce=n(326),ue=(n(281),function(e){return a.createElement("div",{className:"content"},a.createElement("span",{className:"time"},Object(ie.a)(Object(ce.a)(e.started_at),"HH:mm")," - ",Object(ie.a)(Object(ce.a)(e.ended_at),"H:mm")),a.createElement("span",{className:"description"},e.description))}),le=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.dates.map((function(t){var n=e.props.finishedTomatoes[t];return a.createElement("div",{key:t,className:"List"},a.createElement("div",{className:"title"},a.createElement("span",null,t),a.createElement("span",null,"\u5b8c\u6210\u4e86 ",n.length," \u4e2a\u756a\u8304")),n.map((function(e){return a.createElement(ue,Object.assign({key:e.id},e))})))}));return a.createElement("div",{className:"TomatoList",id:"TomatoList"},t)}},{key:"dates",get:function(){return Object.keys(this.props.finishedTomatoes).sort((function(e,t){return Date.parse(t)-Date.parse(e)}))}}]),n}(a.Component),de=n(26),me=n.n(de),pe=(n(282),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).startTomato=Object(O.a)(T.a.mark((function t(){var n;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.post("tomatoes",{duration:15e5});case 3:n=t.sent,e.props.addTomato(n.data.resource),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e}return Object(p.a)(n,[{key:"render",value:function(){return a.createElement("div",{className:"Tomatoes",id:"Tomatoes"},a.createElement(se,{startTomato:this.startTomato,unfinishedTomato:this.unfinishedTomato,updateTomato:this.props.updateTomato}),a.createElement(le,{finishedTomatoes:this.finishedTomatoes}))}},{key:"unfinishedTomato",get:function(){return this.props.tomatoes.filter((function(e){return!e.description&&!e.ended_at&&!e.aborted}))[0]}},{key:"finishedTomatoes",get:function(){var e=this.props.tomatoes.filter((function(e){return e.description&&e.ended_at&&!e.aborted}));return me.a.groupBy(e,(function(e){return Object(ie.a)(Object(ce.a)(e.started_at),"yyyy-MM-d")}))}}]),n}(a.Component)),he={addTomato:function(e){return{type:"ADD_TOMATO",payload:e}},updateTomato:L},fe=Object(i.b)((function(e,t){return Object(A.a)({tomatoes:e.tomatoes},t)}),he)(pe),ye=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).points=function(){var t=Object.keys(e.props.data).sort((function(e,t){return Date.parse(e)-Date.parse(t)})),n=t[0];if(n){var a,o=(new Date).getTime()-Date.parse(n),r=0,s=t.map((function(t){if(t===n)return a=0,"";var s=(Date.parse(t)-Date.parse(n))/o*332,i=60*(1-(r+=e.props.data[t].length)/e.props.totalFinishedCount);return a=i,"".concat(s,",").concat(i)}));return["0,60"].concat(Object(u.a)(s),["332,".concat(a),"332,60"]).join(" ")}return"0,60 332,60"},e}return Object(p.a)(n,[{key:"render",value:function(){return a.createElement("div",{className:"Polygon",id:"Polygon"},a.createElement("svg",null,a.createElement("polygon",{fill:"rgba(215,78,78,0.1)",stroke:"rgba(215,78,78,0.5)",strokeWidth:"1",points:this.points()})))}}]),n}(a.Component),ve=(n(113),n(45)),be=(n(284),n(285),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){var e;Object(m.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).updateTodo=function(){var t=Object(O.a)(T.a.mark((function t(n){var a;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.put("todos/".concat(e.props.todo.id),n);case 3:a=t.sent,e.props.updateTodo(a.data.resource),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(p.a)(n,[{key:"render",value:function(){var e,t,n=this;return"finished"===this.props.itemType?(t=Object(ie.a)(Object(ce.a)(this.props.todo.updated_at),"HH:mm"),e=a.createElement("div",{className:"action"},a.createElement("span",{onClick:function(){return n.updateTodo({completed:!1})}},"\u6062\u590d"),a.createElement("span",{onClick:function(){return n.updateTodo({deleted:!0})}},"\u5220\u9664"))):"deleted"===this.props.itemType&&(t=Object(ie.a)(Object(ce.a)(this.props.todo.created_at),"yyyy-MM-dd HH:mm"),e=a.createElement("div",{className:"action"},a.createElement("span",{onClick:function(){return n.updateTodo({deleted:!1})}},"\u6062\u590d"))),a.createElement("div",{className:"TodoHistoryItem",id:"TodoHistoryItem"},a.createElement("div",{className:"text"},a.createElement("span",{className:"time"},t),a.createElement("span",{className:"description"},this.props.todo.description)),e)}}]),n}(a.Component)),Ee={updateTodo:B},Te=Object(i.b)((function(e,t){return Object(A.a)({},t)}),Ee)(be),Oe=ve.a.TabPane,ge=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"],n=this.finishedDates.map((function(n){return a.createElement("div",{key:n,className:"dailyTodos"},a.createElement("div",{className:"summary"},a.createElement("p",{className:"date"},a.createElement("span",null,n),a.createElement("span",null,t[new Date(n).getDay()])),a.createElement("span",{className:"finishedCount"},"\u5b8c\u6210\u4e86",e.dailyFinishedTodos[n].length,"\u4e2a\u4efb\u52a1")),a.createElement("div",{className:"todoList"},e.dailyFinishedTodos[n].map((function(e){return a.createElement(Te,{key:e.id,todo:e,itemType:"finished"})}))))})),o=this.deletedTodos.map((function(e){return a.createElement(Te,{key:e.id,todo:e,itemType:"deleted"})}));return a.createElement(ve.a,{defaultActiveKey:"1"},a.createElement(Oe,{tab:"\u5df2\u5b8c\u6210\u7684\u4efb\u52a1",key:"1"},a.createElement("div",{className:"TodoHistory",id:"TodoHistory"},n)),a.createElement(Oe,{tab:"\u5df2\u5220\u9664\u7684\u4efb\u52a1",key:"2"},a.createElement("div",{className:"TodoHistory",id:"TodoHistory"},o)))}},{key:"finishedTodos",get:function(){return this.props.todos.filter((function(e){return e.completed&&!e.deleted}))}},{key:"deletedTodos",get:function(){return this.props.todos.filter((function(e){return e.deleted}))}},{key:"dailyFinishedTodos",get:function(){return me.a.groupBy(this.finishedTodos,(function(e){return Object(ie.a)(Object(ce.a)(e.updated_at),"yyyy-MM-d")}))}},{key:"finishedDates",get:function(){return Object.keys(this.dailyFinishedTodos).sort((function(e,t){return Date.parse(t)-Date.parse(e)}))}}]),n}(a.Component),je=Object(i.b)((function(e,t){return Object(A.a)({todos:e.todos},t)}))(ge),ke=(n(304),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).updateTomato=function(){var e=Object(O.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.put("tomatoes/".concat(a.props.tomato.id),t);case 3:n=e.sent,a.props.updateTomato(n.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),a.onKeyUp=function(e){13===e.keyCode&&""!==a.state.description&&a.updateTomato({description:a.state.description,extra:{}})},a.state={description:a.props.tomato.description},a}return Object(p.a)(n,[{key:"render",value:function(){var e,t,n,o=this;if("finished"===this.props.itemType){var r=Object(ie.a)(Object(ce.a)(this.props.tomato.started_at),"HH:mm"),s=Object(ie.a)(Object(ce.a)(this.props.tomato.ended_at),"HH:mm");t="".concat(r," - ").concat(s),n=this.props.tomato.description,e=a.createElement("div",{className:"action"},a.createElement("span",{onClick:function(){return o.updateTomato({extra:{editing:!0}})}},"\u7f16\u8f91"),a.createElement("span",{onClick:function(){return o.updateTomato({aborted:!0})}},"\u5220\u9664"))}else"aborted"===this.props.itemType&&(t=Object(ie.a)(Object(ce.a)(this.props.tomato.created_at),"yyyy-MM-dd HH:mm"),n=this.props.tomato.description?this.props.tomato.description:"\u65e0\u756a\u8304\u63cf\u8ff0",e=a.createElement("div",{className:"action"},a.createElement("span",{onClick:function(){return o.updateTomato({extra:{editing:!0}})}},"\u7f16\u8f91")));var i=a.createElement("div",{className:"action"},a.createElement("span",{onClick:function(){return o.updateTomato({description:o.state.description,extra:{}})}},"\u63d0\u4ea4"),a.createElement("span",{onClick:function(){return o.updateTomato({extra:{}})}},"\u53d6\u6d88")),c=a.createElement("div",{className:"itemWrapper"},a.createElement("div",{className:"text"},a.createElement("span",{className:"time"},t),a.createElement("input",{className:"editing",value:this.state.description,onChange:function(e){o.setState({description:e.target.value})},onKeyUp:this.onKeyUp})),i),u=a.createElement("div",{className:"itemWrapper"},a.createElement("div",{className:"text"},a.createElement("span",{className:"time"},t),a.createElement("span",{className:"description"},n)),e);return a.createElement("div",{className:"TomatoHistoryItem",id:"TomatoHistoryItem"},'{"editing":true}'===JSON.stringify(this.props.tomato.extra)?c:u)}}]),n}(a.Component)),we={updateTomato:L},De=Object(i.b)((function(e,t){return Object(A.a)({},t)}),we)(ke),Ce=(n(305),ve.a.TabPane),Ne=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"],n=this.finishedDates.map((function(n){return a.createElement("div",{key:n,className:"dailyTomatoes"},a.createElement("div",{className:"summary"},a.createElement("p",{className:"date"},a.createElement("span",null,n),a.createElement("span",null,t[new Date(n).getDay()])),a.createElement("span",{className:"finishedCount"},"\u5b8c\u6210\u4e86",e.dailyFinishedTomatoes[n].length,"\u4e2a\u756a\u8304")),a.createElement("div",{className:"tomatoList"},e.dailyFinishedTomatoes[n].map((function(e){return a.createElement(De,{key:e.id,tomato:e,itemType:"finished"})}))))})),o=this.abortedTomatoes.map((function(e){return a.createElement(De,{key:e.id,tomato:e,itemType:"aborted"})}));return a.createElement(ve.a,{defaultActiveKey:"1"},a.createElement(Ce,{tab:"\u5b8c\u6210\u7684\u756a\u8304",key:"1"},a.createElement("div",{className:"TomatoHistory",id:"TomatoHistory"},n)),a.createElement(Ce,{tab:"\u5f03\u7528\u756a\u8304\u8bb0\u5f55",key:"2"},a.createElement("div",{className:"TomatoHistory",id:"TomatoHistory"},o)))}},{key:"finishedTomatoes",get:function(){return this.props.tomatoes.filter((function(e){return e.description&&!e.aborted&&e.ended_at}))}},{key:"abortedTomatoes",get:function(){return this.props.tomatoes.filter((function(e){return e.aborted&&e.description}))}},{key:"dailyFinishedTomatoes",get:function(){return me.a.groupBy(this.finishedTomatoes,(function(e){return Object(ie.a)(Object(ce.a)(e.started_at),"yyyy-MM-d")}))}},{key:"finishedDates",get:function(){return Object.keys(this.dailyFinishedTomatoes).sort((function(e,t){return Date.parse(t)-Date.parse(e)}))}}]),n}(a.Component),xe=Object(i.b)((function(e,t){return Object(A.a)({tomatoes:e.tomatoes},t)}))(Ne),Me=(n(324),n(168)),Se=n(327),Pe=n(328),_e=n(120),Ae=n.n(_e),He=(n(308),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleWidth=function(){var e,t=document.getElementById("StatisticsItem"),n=document.getElementsByClassName("rect"),o=null===t||void 0===t?void 0:t.getBoundingClientRect().left,r=null===t||void 0===t?void 0:t.getBoundingClientRect().right;e=o?r&&o?r-o-32:null:r?r-32:null,a.setState({width:e}),n&&Array.prototype.map.call(n,(function(e){e.style.width="".concat(a.state.width,"px")})),a.handleArr()},a.handleArr=function(){var e=a.state.width?97.5*a.state.width/100/(a.state.timeSpan-1):0,t=Array.from(new Array(a.state.timeSpan),(function(t,n){return{x:n*e,y:170}}));a.setState({arr:t})},a.getDays=function(e,t){if(2===t)return Object(Se.a)(e)?29:28;return{1:31,3:31,4:30,5:31,6:30,7:31,8:31,9:30,10:31,11:30,12:31}[t]},a.handleTimeSpan=function(e){a.handleWidth();var t,n=new Date(e._d).getFullYear(),o=new Date(e._d).getMonth()+1,r=Object(Pe.a)(new Date(n,o))-1,s=Ae()(e._d).format("YYYY-MM");t=a.props.finishedMonths.includes(s)?a.props.monthJobs[s].length:0;var i=Object.keys(a.props.dailyFinishedJobs),c=Array.from({length:a.getDays(n,o)},(function(e,t){return"".concat(n,"-").concat(o,"-").concat(t+1)})),u=i.map((function(e){return a.props.dailyFinishedJobs[e].length})),l=a.state.width?97.5*a.state.width/100/(r-1):0,d=170/Math.max.apply(null,u),m=Array.from(new Array(r),(function(e,t){var n=Ae()(c[t]).format("YYYY-MM-DD"),o=a.props.dailyFinishedJobs[n]?a.props.dailyFinishedJobs[n].length:0;return{x:t*l,y:o>0?176-o*d:170}}));a.setState({timeSpan:r,arr:m,monthTomatoesCount:t})},a.point=function(){var e=a.state.arr[0];if(e){var t=a.state.arr.map((function(e){return"L".concat(e.x+7.5,",").concat(e.y)}));return["M".concat(e.x+7.5,",").concat(e.y)].concat(Object(u.a)(t)).join(" ")}return"M7.5,170 L7.5,170"},a.state={timeSpan:0,width:968,arr:[],monthTomatoesCount:0},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.handleWidth(),window.addEventListener("resize",this.handleWidth)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleWidth)}},{key:"render",value:function(){var e=this.state.timeSpan?Math.floor(this.state.monthTomatoesCount/this.state.timeSpan*100)/100:0;return a.createElement("div",{className:"StatisticsItem",id:"StatisticsItem"},a.createElement("div",{className:"timeContainer"},a.createElement("span",{className:"monthChoose"},"\u8bf7\u9009\u62e9\u6708\u4efd\uff1a"),a.createElement(Me.a,{allowClear:!1,onChange:this.handleTimeSpan,picker:"month"})),a.createElement("div",{className:"countContainer"},a.createElement("span",{className:"count"},a.createElement("strong",null,this.state.monthTomatoesCount)," \u603b\u6570"),a.createElement("span",{className:"count"},a.createElement("strong",null,e)," \u65e5\u5e73\u5747\u6570")),a.createElement("div",{className:"chartContainer"},a.createElement("svg",{width:"100%",height:"200px"},a.createElement("g",null,a.createElement("rect",{x:"0",y:"0",height:"170px",id:"rect",className:"rect"}),this.state.arr.map((function(e,t){return a.createElement("text",{x:e.x+7.5,y:200,textAnchor:"middle",key:t},t+1)})),a.createElement("path",{d:this.point()}),this.state.arr.map((function(e,t){return a.createElement("circle",{cx:e.x+7.5,cy:e.y,r:"5",key:t})}))))))}}]),n}(a.Component)),Fe=ve.a.TabPane,Ie=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return a.createElement(ve.a,{defaultActiveKey:"1"},a.createElement(Fe,{tab:"\u756a\u8304\u7edf\u8ba1",key:"1"},a.createElement("div",{className:"TomatoHistory",id:"TomatoHistory"},a.createElement(He,{dailyFinishedJobs:this.dailyFinishedTomatoes,monthJobs:this.monthFinishedTomatoes,finishedMonths:this.tomatoMonths}))),a.createElement(Fe,{tab:"\u4efb\u52a1\u7edf\u8ba1",key:"2"},a.createElement("div",{className:"TodoHistory",id:"TodoHistory"},a.createElement(He,{dailyFinishedJobs:this.dailyFinishedTodos,monthJobs:this.monthFinishedTodos,finishedMonths:this.todoMonths}))))}},{key:"finishedTodos",get:function(){return this.props.todos.filter((function(e){return e.completed&&!e.deleted}))}},{key:"finishedTomatoes",get:function(){return this.props.tomatoes.filter((function(e){return e.description&&!e.aborted&&e.ended_at}))}},{key:"dailyFinishedTodos",get:function(){return me.a.groupBy(this.finishedTodos,(function(e){return Object(ie.a)(Object(ce.a)(e.updated_at),"yyyy-MM-dd")}))}},{key:"dailyFinishedTomatoes",get:function(){return me.a.groupBy(this.finishedTomatoes,(function(e){return Object(ie.a)(Object(ce.a)(e.started_at),"yyyy-MM-dd")}))}},{key:"monthFinishedTodos",get:function(){return me.a.groupBy(this.finishedTodos,(function(e){return Object(ie.a)(Object(ce.a)(e.updated_at),"yyyy-MM")}))}},{key:"monthFinishedTomatoes",get:function(){return me.a.groupBy(this.finishedTomatoes,(function(e){return Object(ie.a)(Object(ce.a)(e.started_at),"yyyy-MM")}))}},{key:"tomatoMonths",get:function(){return Object.keys(this.monthFinishedTomatoes).sort((function(e,t){return Date.parse(t)-Date.parse(e)}))}},{key:"todoMonths",get:function(){return Object.keys(this.monthFinishedTodos).sort((function(e,t){return Date.parse(t)-Date.parse(e)}))}}]),n}(a.Component),We=Object(i.b)((function(e,t){return Object(A.a)({todos:e.todos,tomatoes:e.tomatoes},t)}))(Ie),Ue=(n(315),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).toggleStatistic=function(){"block"===a.state.staDisPlay?a.setState({tomatoDisPlay:"none",staDisPlay:"none",todoDisPlay:"none"}):a.setState({tomatoDisPlay:"none",staDisPlay:"block",todoDisPlay:"none"})},a.toggoleTomato=function(){"block"===a.state.tomatoDisPlay?a.setState({tomatoDisPlay:"none",staDisPlay:"none",todoDisPlay:"none"}):a.setState({tomatoDisPlay:"block",staDisPlay:"none",todoDisPlay:"none"})},a.toggoleTodo=function(){"block"===a.state.todoDisPlay?a.setState({tomatoDisPlay:"none",staDisPlay:"none",todoDisPlay:"none"}):a.setState({tomatoDisPlay:"none",staDisPlay:"none",todoDisPlay:"block"})},a.state={staDisPlay:"block",tomatoDisPlay:"none",todoDisPlay:"none"},a}return Object(p.a)(n,[{key:"render",value:function(){return a.createElement("div",{className:"Histories",id:"Histories"},a.createElement("ul",null,a.createElement("li",{onClick:this.toggleStatistic},a.createElement("div",{className:"gragh"},a.createElement("div",{className:"title"},"\u7edf\u8ba1"))),a.createElement("li",{onClick:this.toggoleTomato},a.createElement("div",{className:"gragh"},a.createElement("div",{className:"title"},"\u756a\u8304\u5386\u53f2"),a.createElement("span",{className:"textTitle"},"\u7d2f\u8ba1\u5b8c\u6210\u756a\u8304"),a.createElement("span",{className:"number"},this.finishedTomatoes.length)),a.createElement(ye,{data:this.tomatoData,totalFinishedCount:this.finishedTomatoes.length})),a.createElement("li",{onClick:this.toggoleTodo},a.createElement("div",{className:"gragh"},a.createElement("div",{className:"title"},"\u4efb\u52a1\u5386\u53f2"),a.createElement("span",{className:"textTitle"},"\u7d2f\u8ba1\u5b8c\u6210\u4efb\u52a1"),a.createElement("span",{className:"number"},this.finishedTodos.length)),a.createElement(ye,{data:this.todosData,totalFinishedCount:this.finishedTodos.length}))),a.createElement("div",{style:{display:this.state.staDisPlay}},a.createElement(We,null)),a.createElement("div",{style:{display:this.state.tomatoDisPlay}},a.createElement(xe,null)),a.createElement("div",{style:{display:this.state.todoDisPlay}},a.createElement(je,null)))}},{key:"finishedTodos",get:function(){return this.props.todos.filter((function(e){return e.completed&&!e.deleted}))}},{key:"finishedTomatoes",get:function(){return this.props.tomatoes.filter((function(e){return e.description&&!e.aborted&&e.ended_at}))}},{key:"tomatoData",get:function(){return me.a.groupBy(this.finishedTomatoes,(function(e){return Object(ie.a)(Object(ce.a)(e.started_at),"yyyy-MM-d")}))}},{key:"todosData",get:function(){return me.a.groupBy(this.finishedTodos,(function(e){return Object(ie.a)(Object(ce.a)(e.updated_at),"yyyy-MM-d")}))}}]),n}(a.Component)),Be=Object(i.b)((function(e,t){return Object(A.a)({todos:e.todos,tomatoes:e.tomatoes},t)}))(Ue),Le=(n(316),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var o;return Object(m.a)(this,n),(o=t.call(this,e)).getMe=Object(O.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.get("me");case 2:t=e.sent,o.setState({user:t.data});case 4:case"end":return e.stop()}}),e)}))),o.getTodo=Object(O.a)(T.a.mark((function e(){var t,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.get("todos");case 3:t=e.sent,n=t.data.resources.map((function(e){return Object.assign({},e,{editing:!1})})),o.props.initTodos(n),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),o.getTomatoes=Object(O.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.get("tomatoes");case 3:t=e.sent,o.props.initTomatoes(t.data.resources),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),o.signOut=function(){localStorage.setItem("x-token",""),o.props.history.push("/login")},o.menu=a.createElement(F.a,null,a.createElement(F.a.Item,{key:"2",onClick:o.signOut},a.createElement(I.a,null),"\u767b\u51fa")),o.state={user:{}},o}return Object(p.a)(n,[{key:"UNSAFE_componentWillMount",value:function(){var e=Object(O.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMe();case 2:return e.next=4,this.getTodo();case 4:return e.next=6,this.getTomatoes();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.createElement("div",{className:"Home",id:"Home"},a.createElement("header",null,a.createElement("span",{className:"Logo"}," WJW-\u756a\u8304\u571f\u8c46"),a.createElement(H.a,{overlay:this.menu,trigger:["click"]},a.createElement("span",{className:"User"},this.state.user.account," ",a.createElement(W.a,{style:{marginLeft:8}})))),a.createElement("main",null,a.createElement(fe,null),a.createElement(te,null)),a.createElement("div",null,a.createElement(Be,null)),a.createElement("footer",null,a.createElement(U.a,null)," \u5434\u4e00\u664f"))}}]),n}(a.Component)),Je={initTodos:function(e){return{type:"INIT_TODOS",payload:e}},initTomatoes:function(e){return{type:"INIT_TOMATOES",payload:e}}},Ke=Object(i.b)((function(e,t){return Object(A.a)({},t)}),Je)(Object(y.f)(Le)),Ye=(n(321),function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).onChangeAccount=function(e){a.setState({account:e.target.value})},a.onChangePassword=function(e){a.setState({password:e.target.value})},a.onChangePasswordConfirmation=function(e){a.setState({passwordConfirmation:e.target.value})},a.submit=Object(O.a)(T.a.mark((function e(){var t,n,o,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state,n=t.account,o=t.password,r=t.passwordConfirmation,e.prev=1,e.next=4,M.post("sign_up/user",{account:n,password:o,password_confirmation:r});case 4:a.props.history.push("/"),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(1),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])}))),a.state={account:"",password:"",passwordConfirmation:""},a}return Object(p.a)(n,[{key:"render",value:function(){var e=this.state,t=e.account,n=e.password,o=e.passwordConfirmation;return a.createElement("div",{className:"SignUp",id:"SignUp"},a.createElement("h1",null,"W-\u756a\u8304\u95f9\u949f\u6ce8\u518c"),a.createElement(b.a,{placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",value:t,onChange:this.onChangeAccount,prefix:a.createElement(g.a,{className:"site-form-item-icon"})}),a.createElement(b.a.Password,{placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",value:n,onChange:this.onChangePassword,prefix:a.createElement(j.a,{className:"site-form-item-icon"})}),a.createElement(b.a.Password,{placeholder:"\u8bf7\u786e\u8ba4\u5bc6\u7801",value:o,onChange:this.onChangePasswordConfirmation,prefix:a.createElement(j.a,{className:"site-form-item-icon"})}),a.createElement(v.a,{onClick:this.submit,className:"signUpButton",type:"primary"},"\u6ce8\u518c"),a.createElement("p",null,"\u5982\u679c\u4f60\u6709\u8d26\u53f7\uff0c\u8bf7",a.createElement(S.a,{to:"/login"},"\u767b\u5f55")))}}]),n}(a.Component)),ze=Object(y.f)(Ye),Re=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return o.a.createElement(y.b,{history:C},o.a.createElement(y.c,null,o.a.createElement(y.a,{path:"/login"},o.a.createElement(_,null)),o.a.createElement(y.a,{path:"/signup"},o.a.createElement(ze,null)),o.a.createElement(y.a,{path:"/"},o.a.createElement(Ke,null))))}}]),n}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(i.a,{store:d},o.a.createElement(Re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[172,1,2]]]);
//# sourceMappingURL=main.662bd11c.chunk.js.map